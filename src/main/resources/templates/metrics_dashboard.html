<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>

<title>Metric Graph</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages : [ "corechart" ]});
 
function drawChart() {
$.get("/v1/metric-graph-data",function(mydata) {
    var data = google.visualization.arrayToDataTable(mydata);
    var options = {title : 'Website Metric',
                   hAxis : {title : 'Time',titleTextStyle : {color : '#333'}},
                   vAxis : {minValue : 0}};
 
    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
    chart.draw(data, options);
 
});
 
}
</script>
<style type="text/css">
	#chart_div {
		width: 900px;
		height: 500px;
		border: 1px solid black;
	}
</style>
</head>
<body onload="drawChart()">
	<h1>Metrics Dashboard</h1>
    <div id="chart_div"></div>
    <p th:if="${not requestSummary.empty}">
    	<h3>Request summary:</h3>
	    <span th:each="curr : ${requestSummary}">
	       <span th:text="${curr.key}"></span> has been called <span th:text="${curr.value}"></span> times.<br /></span>
    </p>
</body>
</html>